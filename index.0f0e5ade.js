function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired7c6=i),i.register("fExtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}})),i.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),i.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),i.register("3LGG3",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}}));var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t){var a=r.default(e,t,"get");return o.default(e,a)};var r=l(i("fExtF")),o=l(i("iaRLo"));function l(e){return e&&e.__esModule?e:{default:e}}var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,t,a){c.default(e,t),t.set(e,a)};var u,c=(u=i("7K24o"))&&u.__esModule?u:{default:u};var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,a){var n=g.default(e,t,"set");return p.default(e,n,a),a};var g=f(i("fExtF")),p=f(i("3LGG3"));function f(e){return e&&e.__esModule?e:{default:e}}var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a};var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(e,t){_.default(e,t),t.add(e)};var _=function(e){return e&&e.__esModule?e:{default:e}}(i("7K24o"));var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;return e};var y=new WeakMap,w=new WeakMap,S=new WeakSet,M=new WeakSet,P=new WeakSet;async function $(e){const t=await fetch(e);if(!t.ok)throw new Error(t.status);return await t.json()}function E(e){e.forEach((e=>{e.genre_ids=e.genre_ids.map((e=>this.genres.find((t=>t.id===e)).name)),e.genres=e.genre_ids,delete e.genre_ids}))}function L(e){e.genres=e.genres.map((e=>e.name))}var k=new WeakMap;var q=new WeakMap,A=new WeakMap,O=new WeakSet,R=new WeakSet;class x extends class{save(t){try{const a=JSON.stringify(t);localStorage.setItem(e(s)(this,k),a)}catch(e){console.log("Set state error:",e.message)}}load(){try{let t=localStorage.getItem(e(s)(this,k));return t=null===t?void 0:JSON.parse(t)}catch(e){console.log("Get state error:",e.message)}}remove(){localStorage.removeItem(e(s)(this,k))}constructor(t){e(d)(this,k,{writable:!0,value:void 0}),e(h)(this,k,t)}}{async loadCollection(t){if(void 0===e(s)(this,q)||e(s)(this,q)===[]||this.page>e(s)(this,A))return;let a;const n=(this.page-1)*this.perPage;a=1===e(s)(this,A)?e(s)(this,q):e(s)(this,q).slice(n,n+this.perPage);const i=a.map((e=>t({movieId:e})));return await Promise.all(i)}addToCollection(t){this.isInCollection(t)||(e(s)(this,q).push(t),e(m)(this,R,j).call(this))}removeFromCollection(t){if(!this.isInCollection(t))return;const a=e(s)(this,q).indexOf(t);e(s)(this,q).splice(a,1),e(m)(this,R,j).call(this)}isInCollection(t){return e(s)(this,q).includes(t)}set page(e){this.page=e}get page(){return this.page}set perPage(e){this.perPage=e}get perPage(){return this.perPage}resetPage(){this.page=1}constructor(t){super(t),e(v)(this,O),e(v)(this,R),e(b)(this,"page",void 0),e(b)(this,"perPage",void 0),e(d)(this,q,{writable:!0,value:void 0}),e(d)(this,A,{writable:!0,value:void 0}),e(h)(this,A,1),this.perPage=9,this.page=1,e(m)(this,O,T).call(this)}}function T(){e(h)(this,q,this.load()),void 0===e(s)(this,q)&&e(h)(this,q,[]),e(h)(this,A,Math.ceil(e(s)(this,q).length/this.perPage))}function j(){this.save(e(s)(this,q))}var G=new WeakMap,W=new WeakMap;const C={backdrop:document.querySelector("#backdrop-modal-card"),testOpenModalCard:document.querySelector("#try-to-open-modal-card")};new class{async getTrending(){const t=`${e(s)(this,w)}/${this.URL_PARAMETERS.trending}?api_key=${e(s)(this,y)}&page=${this.page}`,a=await e(m)(this,S,$).call(this,t);return e(m)(this,M,E).call(this,a.results),a.results}async searchMovies({query:t,language:a}){this.setCurrentLanguage({language:a});const n=`${e(s)(this,w)}/${this.URL_PARAMETERS.search}?api_key=${e(s)(this,y)}&language=${this.currentLanguage}&query=${t}&page=${this.page}&include_adult=false`,i=await e(m)(this,S,$).call(this,n);return e(m)(this,M,E).call(this,i.results),i.results}async getMovie({movieId:t}){const a=`${e(s)(this,w)}/${this.URL_PARAMETERS.movieDetails}/${t}?api_key=${e(s)(this,y)}&language=${this.currentLanguage}`,n=await e(m)(this,S,$).call(this,a);return e(m)(this,P,L).call(this,n),n}async getGenres(){const t=`${e(s)(this,w)}/${this.URL_PARAMETERS.genres}?api_key=${e(s)(this,y)}&language=${this.currentLanguage}`,a=await e(m)(this,S,$).call(this,t);this.genres=a.genres}resetPage(){this.page=1}set page(e){this.page=e}get page(){return this.page}incrementPage(){this.page+=1}decrementPage(){this.page-=1}setCurrentLanguage({language:e}){this.currentLanguage!==e&&(this.currentLanguage=Object.values(this.LANGUAGES).includes(e)?e:this.LANGUAGES.default,this.getGenres())}constructor(){e(v)(this,S),e(v)(this,M),e(v)(this,P),e(d)(this,y,{writable:!0,value:void 0}),e(d)(this,w,{writable:!0,value:void 0}),e(b)(this,"page",void 0),e(b)(this,"currentLanguage",void 0),e(h)(this,y,"704d5b04a49684ea4810e36d12ae79df"),e(h)(this,w,"https://api.themoviedb.org/3"),this.URL_PARAMETERS={trending:"trending/movie/day",search:"search/movie",movieDetails:"movie",genres:"genre/movie/list"},this.LANGUAGES={default:"en-US",ukrainian:"uk-UA"},this.page=1,this.genres=null,this.setCurrentLanguage({language:this.LANGUAGES.default})}},new x("moviesWatched"),new x("moviesQueue"),new class{getImagePath({path:t,width:a="default"}){const n=e(s)(this,W)[a];return`${e(s)(this,G)}${n}${t}`}constructor(){e(d)(this,G,{writable:!0,value:void 0}),e(d)(this,W,{writable:!0,value:void 0}),e(h)(this,G,"https://image.tmdb.org/t/p/"),e(h)(this,W,{default:"w342",retina:"w780",original:"original"})}},document.body,document.querySelector("#logo"),document.querySelector("#home"),document.querySelector("#my-library"),document.querySelector("#collections-nav"),document.querySelector("#watched"),document.querySelector("#queue"),document.querySelector("#search-form"),document.querySelector("#library"),document.querySelector("#backdrop"),document.querySelector("#modal"),document.querySelector("#watched-add"),document.querySelector("#queue-add"),document.querySelector("#modal-close"),document.querySelector("#team");C.testOpenModalCard.addEventListener("click",(function(){C.backdrop.classList.remove("is-hidden"),C.backdrop.insertAdjacentHTML("beforeend",function({about:e,imgSrc:t,imgAlt:a,originalTitle:n,vote:i,votes:s,popularity:r}){return`\n    <div class="modal-card container" id="modal">\n        <button type="button" class="modal-card__close-btn" id="modal-close" title="close window" data-modal-close width="30" height="30">\n            <svg class="modal-card__close-btn-icon" width="14" height="14">\n                <use href="./images/icons.svg#icon-close"></use>\n            </svg>\n        </button>\n        <img class="modal-card__img" src="${t}"\n            alt="${a}" loading="lazy">\n        <div class="modal-card-thumb__content">\n            <div class="modal-card-info">\n                <h2 class="modal-card-info__title">${n}</h2>\n                <p class="modal-card-info__item">\n                    <b>Vote/Votes</b>\n                    <span class="modal-card-info__item--vote">${i}</span>\n                    <span>/</span>\n                    <span class="modal-card-info__item--votes">${s}</span>\n                </p>\n                <p class="modal-card-info__item">\n                    <b>Popularity</b>\n                    <span>${r}</span>\n                </p>\n                <p class="modal-card-info__item modal-card-info__item--last-item">\n                    <b>Original Title</b>\n                    <span>${n}</span>\n                </p>\n                <h3 class="modal-card-info-about__title">About</h3>\n                <p class="modal-card-info-about__description">${e}</p>\n            </div>\n            <div class="modal-card-thumb__btn">\n                <button type="button" id="watched-add" title="add to Watched" class="modal-card-btn__watched">add to Watched</button>\n                <button type="button" id="queue-add" title="add to Queue" class="modal-card-btn__queue">add to queue</button>\n            </div>\n        </div>\n    </div>\n    `}({}))}));
//# sourceMappingURL=index.0f0e5ade.js.map
