function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in a)return a[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequired7c6=n),n.register("fExtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}})),n.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),n.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),n.register("3LGG3",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}}));var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var a=s.default(e,t,"get");return o.default(e,a)};var s=l(n("fExtF")),o=l(n("iaRLo"));function l(e){return e&&e.__esModule?e:{default:e}}var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,t,a){u.default(e,t),t.set(e,a)};var c,u=(c=n("7K24o"))&&c.__esModule?c:{default:c};var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,a){var i=g.default(e,t,"set");return p.default(e,i,a),a};var g=m(n("fExtF")),p=m(n("3LGG3"));function m(e){return e&&e.__esModule?e:{default:e}}var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a};var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(e,t){b.default(e,t),t.add(e)};var b=function(e){return e&&e.__esModule?e:{default:e}}(n("7K24o"));var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;return e};var y=new WeakMap,w=new WeakMap,S=new WeakSet,M=new WeakSet,$=new WeakSet;async function P(e){const t=await fetch(e);if(!t.ok)throw new Error(t.status);return await t.json()}function A(e){e.forEach((e=>{e.genre_ids=e.genre_ids.map((e=>this.genres.find((t=>t.id===e)).name)),e.genres=e.genre_ids,delete e.genre_ids}))}function L(e){e.genres=e.genres.map((e=>e.name))}var j=new WeakMap;var k=new WeakMap,q=new WeakMap,x=new WeakSet,E=new WeakSet;class C extends class{save(t){try{const a=JSON.stringify(t);localStorage.setItem(e(r)(this,j),a)}catch(e){console.log("Set state error:",e.message)}}load(){try{let t=localStorage.getItem(e(r)(this,j));return t=null===t?void 0:JSON.parse(t)}catch(e){console.log("Get state error:",e.message)}}remove(){localStorage.removeItem(e(r)(this,j))}constructor(t){e(d)(this,j,{writable:!0,value:void 0}),e(h)(this,j,t)}}{async loadCollection({loader:t}){if(void 0===e(r)(this,k)||e(r)(this,k)===[]||this.page>e(r)(this,q))return;let a;const i=(this.page-1)*this.perPage;a=1===e(r)(this,q)?e(r)(this,k):e(r)(this,k).slice(i,i+this.perPage);const n=a.map((e=>t({movieId:e})));return{results:await Promise.all(n),total_pages:e(r)(this,q),page:this.page}}addToCollection({id:t=null}){t&&!this.isInCollection({id:t})&&(e(r)(this,k).push(t),e(f)(this,E,O).call(this))}removeFromCollection({id:t=null}){if(!this.isInCollection(t))return;const a=e(r)(this,k).indexOf(t);e(r)(this,k).splice(a,1),e(f)(this,E,O).call(this)}isInCollection({id:t=null}){if(t)return e(r)(this,k).includes(t)}set page(e){this.page=e}get page(){return this.page}set perPage(e){this.perPage=e}get perPage(){return this.perPage}resetPage(){this.page=1}constructor(t){super(t),e(v)(this,x),e(v)(this,E),e(_)(this,"page",void 0),e(_)(this,"perPage",void 0),e(d)(this,k,{writable:!0,value:void 0}),e(d)(this,q,{writable:!0,value:void 0}),e(h)(this,q,1),this.perPage=9,this.page=1,e(f)(this,x,T).call(this)}}function T(){e(h)(this,k,this.load()),void 0===e(r)(this,k)&&e(h)(this,k,[]),e(h)(this,q,Math.ceil(e(r)(this,k).length/this.perPage))}function O(){this.save(e(r)(this,k))}class I{static getImagePath({path:e,width:t}){const a=Object.keys(this.width).includes(t)?this.width[t]:this.width.default;return`${this.BASE_URL}${a}${e}`}}e(_)(I,"BASE_URL","https://image.tmdb.org/t/p/"),e(_)(I,"width",{default:"w342",retina:"w780",original:"original"});function R({genres:e,poster_path:t,release_date:a,title:i,vote_average:n}){if(0!==e.length)return(e=e.map((e=>`<span class="movie-card_genres">${e}</span>`))).length>2&&(e.slice(0,2),e.push('<span class="movie-card_genres">Other</span>')),`<article class="movie-card">\n    <picture>\n        <source srcset="${I.getImagePath({path:t})}, 1x, ${I.getImagePath({path:t,width:"retina"})}, 2x" type="image/jpeg">\n        <img class="movie-card_img" src= "${I.getImagePath({path:t})} " alt=${i}>\n    </picture>\n    <h2 class="movie-card_title">${i}</h2>\n    <div class="movie-card_info">\n        ${e}\n        <p class="movie-card_symbol">|</p>\n        <p class="movie-card_date">${a}</p>\n        <div class="movie-card_avarage">\n            <p class="movie-card_avarage__accent">${n}</p>\n        </div>\n    </div>\n</article>`}const W={backdrop:document.querySelector("#backdrop-modal-card"),testOpenModalCard:document.querySelector("#try-to-open-modal-card"),modalContainer:document.querySelector("#modal"),sourseInModalCardDesktop:document.querySelector("#sourse-in-modal-card-desktop"),sourseInModalCardTablet:document.querySelector("#sourse-in-modal-card-tablet"),sourseInModalCardMobile:document.querySelector("#sourse-in-modal-card-mobile"),imgInModalCardPicture:document.querySelector("#img-in-modal-card-picture")};function G({about:e,imgSrc:t,imgAlt:a,originalTitle:i,vote:n,votes:r,popularity:s,genre:o}){return`\n           \n        <div class="modal-card-thumb__img" id="modal">\n        <picture class="modal-card__img">\n            <source media='(min-width:1280px)' srcset="./images/modal-test/rectangle-18-desktop.jpg 375w, ./images/modal-test/rectangle-18-desktop@2x.jpg 750w" sizes="375px" type="image/jpeg" id="sourse-in-modal-card-desktop">\n            <source media='(min-width:768px)' srcset="./images/modal-test/rectangle-18-tablet.jpg 264w, ./images/modal-test/rectangle-18-tablet@2x.jpg 528w" sizes="264px" type="image/jpeg" id="sourse-in-modal-card-tablet">\n            <source media='(min-width:320px)' srcset="./images/modal-test/rectangle-18-mobile.jpg 240w, ./images/modal-test/rectangle-18-mobile@2x.jpg 480w" sizes="240px" type="image/jpeg" id="sourse-in-modal-card-mobile">\n            <img src="${t}" alt="${a}" loading="lazy" type="image/jpeg id="img-in-modal-card-picture"/>\n        </picture>\n        </div>   \n            \n        <div class="modal-card-thumb__content">\n            <div class="modal-card-info">\n                <h2 class="modal-card-info__title">${i}</h2>\n                <p class="modal-card-info__item">\n                    <b>Vote/Votes</b>\n                    <span class="modal-card-info__item--vote">${n}</span>\n                    <span>/</span>\n                    <span class="modal-card-info__item--votes">${r}</span>\n                </p>\n                <p class="modal-card-info__item">\n                    <b>Popularity</b>\n                    <span>${s}</span>\n                </p>\n                <p class="modal-card-info__item">\n                    <b>Original Title</b>\n                    <span>${i}</span>\n                </p>\n                <p class="modal-card-info__item modal-card-info__item--last-item">\n                    <b>Genre</b>\n                    <span>${o}</span>\n                </p>\n                <h3 class="modal-card-info-about__title">About</h3>\n                <p class="modal-card-info-about__description">${e}</p>\n            </div>\n            <div class="modal-card-thumb__btn">\n                <button type="button" id="watched-add" title="add to Watched" class="modal-card-btn__watched">add to Watched</button>\n                <button type="button" id="queue-add" title="add to Queue" class="modal-card-btn__queue">add to queue</button>\n            </div>\n        </div>\n    \n    `}const U=new class{async getGenres(){const t=`${e(r)(this,w)}/${this.URL_PARAMETERS.genres}?api_key=${e(r)(this,y)}&language=${this.currentLanguage}`,a=await e(f)(this,S,P).call(this,t);this.genres=a.genres}async getTrending(){const t=`${e(r)(this,w)}/${this.URL_PARAMETERS.trending}?api_key=${e(r)(this,y)}&page=${this.page}&language=${this.currentLanguage}`,a=await e(f)(this,S,P).call(this,t);return e(f)(this,M,A).call(this,a.results),a}async searchMovies({query:t}){const a=`${e(r)(this,w)}/${this.URL_PARAMETERS.search}?api_key=${e(r)(this,y)}&language=${this.currentLanguage}&query=${t}&page=${this.page}&include_adult=false`,i=await e(f)(this,S,P).call(this,a);return e(f)(this,M,A).call(this,i.results),i}async getMovie({movieId:t}){const a=`${e(r)(this,w)}/${this.URL_PARAMETERS.movieDetails}/${t}?api_key=${e(r)(this,y)}&language=${this.currentLanguage}`,i=await e(f)(this,S,P).call(this,a);return e(f)(this,$,L).call(this,i),i}resetPage(){this.page=1}set page(e){this.page=e}get page(){return this.page}incrementPage(){this.page+=1}decrementPage(){this.page-=1}setCurrentLanguage({language:e}){this.currentLanguage!==e&&(this.currentLanguage=Object.values(this.LANGUAGES).includes(e)?e:this.LANGUAGES.default,this.getGenres())}constructor(){e(v)(this,S),e(v)(this,M),e(v)(this,$),e(d)(this,y,{writable:!0,value:void 0}),e(d)(this,w,{writable:!0,value:void 0}),e(_)(this,"page",void 0),e(_)(this,"currentLanguage",void 0),e(h)(this,y,"704d5b04a49684ea4810e36d12ae79df"),e(h)(this,w,"https://api.themoviedb.org/3"),this.URL_PARAMETERS={trending:"trending/movie/day",search:"search/movie",movieDetails:"movie",genres:"genre/movie/list"},this.LANGUAGES={default:"en-US",ukrainian:"uk-UA"},this.page=1,this.genres=null,this.setCurrentLanguage({language:this.LANGUAGES.default})}},B=(new C("moviesWatched"),new C("moviesQueue"),{body:document.body,headerLogo:document.querySelector("#logo"),headerHomeBtn:document.querySelector("#home"),headerMyLibBtn:document.querySelector("#my-library"),headerBtnsContainer:document.querySelector("#collections-nav"),headerWatchedBtn:document.querySelector("#watched"),headerQueueBtn:document.querySelector("#queue"),searchForm:document.querySelector("#search-form"),libraryContainer:document.querySelector("#library"),backdrop:document.querySelector("#backdrop"),modalContainer:document.querySelector("#modal"),modalAddToWatchedBtn:document.querySelector("#watched-add"),modalAddToQueueBtn:document.querySelector("#queue-add"),modalCloseBtn:document.querySelector("#modal-close"),teamLink:document.querySelector("#team"),paginator:document.querySelector("#paginator")});W.testOpenModalCard.addEventListener("click",(function(){W.backdrop.classList.remove("is-hidden"),W.modalContainer.insertAdjacentHTML("beforeend",G({about:"Four of the West’s most infamous outlaws assemble to steal a huge stash of gold from the most corrupt settlement of the gold rush towns. But not all goes to plan one is killed and the other three escapes with bags of gold hide out in the abandoned gold mine where they happen across another gang of three – who themselves were planning to hit the very same bank! As tensions rise, things go from bad to worse as they realise the bags of gold are filled with lead... they’ve been double crossed – but by who and how?",imgSrc:"./images/modal-test/rectangle-18-mobile.jpg",imgAlt:"test",originalTitle:"A FISTFUL OF LEAD",vote:"7.3",votes:"1260",popularity:"100.2",genre:"Western"})),W.sourseInModalCardMobile.setAttribute("type","image/jpeg"),W.sourseInModalCardTablet.setAttribute("type","image/jpeg"),W.sourseInModalCardDesktop.setAttribute("type","image/jpeg"),W.imgInModalCardPicture.setAttribute("type","image/jpeg")})),function({loader:e,target:t}){e().then((e=>{const a=e.results.map((e=>R(e))).join("");t.innerHTML=a})).catch(console.log)}({loader:U.getTrending.bind(U),target:B.libraryContainer});
//# sourceMappingURL=index.4adb5ef2.js.map
