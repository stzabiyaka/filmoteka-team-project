!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),a.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),a.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),a.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}})),a.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),a.register("gD1JV",(function(e,t){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return n(e,t)}})),a.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),a.register("fVNic",(function(e,t){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return n(e)}})),a.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==r.default(t)&&"function"!=typeof t?n.default(e):t};var n=o(a("ds8z5")),r=o(a("l5bVx"));function o(e){return e&&e.__esModule?e:{default:e}}})),a.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}}));var o={home:"home",search:"search results",watched:"watched",queue:"queue"},i={body:document.body,headerContainer:document.querySelector("#header"),headerLogo:document.querySelector("#logo"),headerLogoName:document.querySelector("#logo-name"),headerHomeBtn:document.querySelector("#home"),headerMyLibBtn:document.querySelector("#my-library"),collectionsBtnsContainer:document.querySelector("#collections-nav"),collectionWatchedBtn:document.querySelector("#watched"),collectionQueueBtn:document.querySelector("#queue"),searchFormContainer:document.querySelector("#search-form-container"),searchForm:document.querySelector("#search-form"),libraryContainer:document.querySelector("#library"),backdrop:document.querySelector("#backdrop-modal-card"),modalContainer:document.querySelector("#modal"),modalAddToWatchedBtn:document.querySelector("#watched-add"),modalAddToQueueBtn:document.querySelector("#queue-add"),modalCloseBtn:document.querySelector("#modal-close"),teamLink:document.querySelector("#team"),paginator:document.querySelector("#paginator"),languageSelector:document.querySelector("#language"),themeButton:document.querySelector("theme")},c={default:{buttons:{home:"home",library:"my library",watched:"watched",queue:"queue",addToWatched:"add to Watched",removeFromWatched:"remove from Watched",addToQueue:"add to queue",removeFromQueue:"remove from Queue"},logoName:"Filmoteka",searchPlaceholder:"Search movies",notification:"Search result not successful. Enter the correct movie name and try again",movieDetails:{vote:"Vote",votes:"Votes",popularity:"Popularity",title:"Original Title",genre:"Genre",about:"About",other:"Other"},copyright:"All Rights Reserved",developedWidth:"Developed with"},ukrainian:{buttons:{home:"головна",library:"моя фільмотека",watched:"переглянуті",queue:"у черзі",addToWatched:"додати до переглянутих",removeFromWatched:"видалити з переглянутих",addToQueue:"додати до черги",removeFromQueue:"видалити з черги"},logoName:"Фільмотека",searchPlaceholder:"Пошук фильмів",notification:"Пошук не мав успіху. Введить правильну назву фільму та спробуйте ще раз",movieDetails:{vote:"Голос",votes:"Голоси",popularity:"Популярнісь",title:"Оригінальна назва",genre:"Жанр",about:"Опис",other:"Інші"},copyright:"Всі права захищено",developedWidth:"Розроблено із"}},s={watched:"watched",queue:"queue"},l={};function u(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}};var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t){var n=f.default(e,t,"get");return v.default(e,n)};var f=p(a("1UHsN")),v=p(a("ffZzF"));function p(e){return e&&e.__esModule?e:{default:e}}var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e,t,n){y.default(e,t),t.set(e,n)};var m,y=(m=a("5k7tO"))&&m.__esModule?m:{default:m};var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(e,t,n){var r=_.default(e,t,"set");return w.default(e,r,n),n};var _=k(a("1UHsN")),w=k(a("jdVyQ"));function k(e){return e&&e.__esModule?e:{default:e}}var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n};var E={};Object.defineProperty(E,"__esModule",{value:!0}),E.default=function(e,t){x.default(e,t),t.add(e)};var x=function(e){return e&&e.__esModule?e:{default:e}}(a("5k7tO"));var P={};function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(e,t,n){t&&O(e.prototype,t);n&&O(e,n);return e};var M={},S=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),i=new M(r||[]);return o._invoke=function(e,t,n){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===v){if("throw"===a)throw o;return j()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var s=u(e,t,n);if("normal"===s.type){if(r=n.done?v:h,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",v="completed",p={};function g(){}function m(){}function y(){}var b={};s(b,o,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(S([])));w&&w!==n&&r.call(w,o)&&(b=w);var k=y.prototype=g.prototype=Object.create(b);function L(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,o,i,c){var s=u(e[a],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function S(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:j}}function j(){return{value:t,done:!0}}return m.prototype=y,s(k,"constructor",y),s(y,"constructor",m),m.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},L(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(k),s(k,c,"Generator"),s(k,o,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:S(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(M);try{regeneratorRuntime=S}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=S:Function("r","regeneratorRuntime = r")(S)}var j=new WeakMap,C=new WeakMap,A=new WeakMap,W=new WeakSet,T=new WeakSet,q=new WeakSet,B=function(){"use strict";function t(n){var r=n.language,a=void 0===r?"default":r;e(d)(this,t),e(E)(this,W),e(E)(this,T),e(E)(this,q),e(g)(this,j,{writable:!0,value:void 0}),e(g)(this,C,{writable:!0,value:void 0}),e(g)(this,A,{writable:!0,value:void 0}),e(b)(this,j,"704d5b04a49684ea4810e36d12ae79df"),e(b)(this,C,"https://api.themoviedb.org/3"),this.URL_PARAMETERS={trending:"trending/movie/day",search:"search/movie",movieDetails:"movie",genres:"genre/movie/list"},this.LANGUAGES={default:"en-US",ukrainian:"uk-UA"},this.genres=null,this.setCurrentLanguage({language:this.LANGUAGES[a]})}return e(P)(t,[{key:"getGenres",value:function(){var t=this;return e(l)(e(M).mark((function n(){var r,a;return e(M).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="".concat(e(h)(t,C),"/").concat(t.URL_PARAMETERS.genres,"?api_key=").concat(e(h)(t,j),"&language=").concat(e(h)(t,A)),n.next=3,e(L)(t,W,R).call(t,r);case 3:a=n.sent,t.genres=a.genres;case 5:case"end":return n.stop()}}),n)})))()}},{key:"getTrendingMovies",value:function(t){var n=t.page,r=void 0===n?1:n,a=this;return e(l)(e(M).mark((function t(){var n,o;return e(M).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e(h)(a,C),"/").concat(a.URL_PARAMETERS.trending,"?api_key=").concat(e(h)(a,j),"&page=").concat(r,"&language=").concat(e(h)(a,A)),t.next=3,e(L)(a,W,R).call(a,n);case 3:return o=t.sent,e(L)(a,T,N).call(a,o.results),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()}},{key:"searchMovies",value:function(t){var n=t.query,r=t.page,a=void 0===r?1:r,o=this;return e(l)(e(M).mark((function t(){var r,i;return e(M).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(e(h)(o,C),"/").concat(o.URL_PARAMETERS.search,"?api_key=").concat(e(h)(o,j),"&language=").concat(e(h)(o,A),"&query=").concat(n,"&page=").concat(a,"&include_adult=false"),t.next=3,e(L)(o,W,R).call(o,r);case 3:return i=t.sent,e(L)(o,T,N).call(o,i.results),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})))()}},{key:"getMovie",value:function(t){var n=t.movieId,r=this;return e(l)(e(M).mark((function t(){var a,o;return e(M).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e(h)(r,C),"/").concat(r.URL_PARAMETERS.movieDetails,"/").concat(n,"?api_key=").concat(e(h)(r,j),"&language=").concat(e(h)(r,A)),t.next=3,e(L)(r,W,R).call(r,a);case 3:return o=t.sent,e(L)(r,q,F).call(r,o),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()}},{key:"getMoviesBundle",value:function(t){t.bundleArray;var n=t.page,r=void 0===n?1:n,a=t.total_pages,o=void 0===a?1:a,i=this;return e(l)(e(M).mark((function t(){var n,a;return e(M).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bundle.map((function(e){return i.getMovie({movieId:e})})),e.next=3,Promise.all(n);case 3:return a=e.sent,e.abrupt("return",{results:a,page:r,total_pages:o});case 5:case"end":return e.stop()}}),t)})))()}},{key:"setCurrentLanguage",value:function(t){var n=t.language;e(b)(this,A,Object.values(this.LANGUAGES).includes(n)?n:this.LANGUAGES.default),this.getGenres()}}]),t}();function R(e){return H.apply(this,arguments)}function H(){return(H=e(l)(e(M).mark((function t(n){var r,a;return e(M).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error(r.status);case 5:return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function N(e){var t=this;e.forEach((function(e){var n=t;e.genre_ids=e.genre_ids.map((function(e){return n.genres.find((function(t){return t.id===e})).name})),e.genres=e.genre_ids,delete e.genre_ids}))}function F(e){e.genres=e.genres.map((function(e){return e.name}))}var G=a("ds8z5"),U={};Object.defineProperty(U,"__esModule",{value:!0}),U.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D.default(e,t)};var D=function(e){return e&&e.__esModule?e:{default:e}}(a("gD1JV"));var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function(e){var t=I.default();return function(){var n,r=V.default(e);if(t){var a=V.default(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z.default(this,n)}};var I=J(a("aTHs7")),V=J(a("fVNic")),z=J(a("jmhxu"));function J(e){return e&&e.__esModule?e:{default:e}}var Z=new WeakMap,Y=function(){"use strict";function t(n){e(d)(this,t),e(g)(this,Z,{writable:!0,value:void 0}),e(b)(this,Z,n)}return e(P)(t,[{key:"save",value:function(t){try{var n=JSON.stringify(t);localStorage.setItem(e(h)(this,Z),n)}catch(e){console.log("Set state error:",e.message)}}},{key:"load",value:function(){try{var t=localStorage.getItem(e(h)(this,Z));return null===t?void 0:JSON.parse(t)}catch(e){console.log("Get state error:",e.message)}}},{key:"remove",value:function(){localStorage.removeItem(e(h)(this,Z))}}]),t}(),K=new WeakMap,X=new WeakSet,$=function(t){"use strict";e(U)(r,t);var n=e(Q)(r);function r(t){var a;return e(d)(this,r),a=n.call(this,t),e(E)(e(G)(a),X),e(g)(e(G)(a),K,{writable:!0,value:void 0}),e(L)(a,X,ee).call(e(G)(a)),a}return e(P)(r,[{key:"getPreferences",value:function(){return e(h)(this,K)}},{key:"setLanguage",value:function(t){var n=t.language;e(h)(this,K).language=n,e(h)(this,K).user=!0,this.save(e(h)(this,K))}},{key:"setTheme",value:function(t){var n=t.theme;e(h)(this,K).theme=n,e(h)(this,K).user=!0,this.save(e(h)(this,K))}}]),r}(Y);function ee(){e(b)(this,K,this.load()),e(h)(this,K)||e(b)(this,K,{language:"default",theme:"default",user:!1})}G=a("ds8z5");var te={};Object.defineProperty(te,"__esModule",{value:!0}),te.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var ne=new WeakMap,re=new WeakMap,ae=new WeakMap,oe=new WeakSet,ie=new WeakSet,ce=function(t){"use strict";e(U)(r,t);var n=e(Q)(r);function r(t){var a;return e(d)(this,r),a=n.call(this,t),e(E)(e(G)(a),oe),e(E)(e(G)(a),ie),e(te)(e(G)(a),"currentPage",{}),e(te)(e(G)(a),"perPage",9),e(g)(e(G)(a),ne,{writable:!0,value:void 0}),e(g)(e(G)(a),re,{writable:!0,value:{}}),e(g)(e(G)(a),ae,{writable:!0,value:Object.values(s)}),e(h)(a,ae).forEach((function(e){a.currentPage[e]=1})),e(L)(a,oe,se).call(e(G)(a)),a}return e(P)(r,[{key:"getCollectionIdsBundle",value:function(t){var n=t.collection,r=t.page,a=void 0===r?1:r;if(!this.isCollectionExist())return"collection is empty";if(!this.isPageExist({collection:n,page:a}))return"there is no such page in the collection";this.currentPage[n]=a;var o=(this.currentPage[n]-1)*this.perPage;return{bundleArray:1===e(h)(this,re)[n]?e(h)(this,ne)[n]:e(h)(this,ne)[n].slice(o,o+this.perPage),totalPages:e(h)(this,re)[n],page:this.currentPage[n]}}},{key:"addToCollection",value:function(t){var n=t.collection,r=t.id;if(!r||this.isInCollection({collection:n,id:r}))return"this id is already in the collection, or you didn`t spicified an id";e(h)(this,ne)[n].push(r),e(L)(this,ie,le).call(this)}},{key:"removeFromCollection",value:function(t){var n=t.collection,r=t.id,a=void 0===r?null:r;if(!this.isInCollection({collection:n,id:a}))return"there is no such id in the collection";var o=e(h)(this,ne)[n].indexOf(a);e(h)(this,ne)[n].splice(o,1),e(L)(this,ie,le).call(this)}},{key:"isCollectionExist",value:function(t){var n=t.collection;return!!e(h)(this,re)[n]}},{key:"isPageExist",value:function(t){var n=t.collection,r=t.page,a=void 0===r?1:r;return e(h)(this,re)[n]>=a}},{key:"isInCollection",value:function(t){var n=t.collection,r=t.id,a=void 0===r?null:r;return a?e(h)(this,ne)[n].includes(a):"there is no such id in the collection"}},{key:"setCurrentPage",value:function(e){var t=e.collection,n=e.newPage;this.currentPage[t]=n}},{key:"getCurrentPage",value:function(e){var t=e.collection;return this.currentPage[t]}},{key:"perPage",get:function(){return this.perPage},set:function(e){this.perPage=e}},{key:"resetCurrentPage",value:function(e){var t=e.collection;this.currentPage[t]=1}}]),r}(Y);function se(){var t=this;if(e(b)(this,ne,this.load()),!e(h)(this,ne)){var n=this;e(b)(this,ne,{}),e(h)(this,ae).forEach((function(t){e(h)(n,ne)[t]=[]}))}var r=Object.keys(e(h)(this,ne));e(h)(this,ae).forEach((function(n){e(h)(t,ne)[n]=e(h)(t,ne)[n]?e(h)(t,ne)[n]:[]})),r.forEach((function(n){e(h)(t,re)[n]=Math.ceil(e(h)(t,ne)[n].length/t.perPage)}))}function le(){this.save(e(h)(this,ne))}var ue=function(){"use strict";function t(){e(d)(this,t)}return e(P)(t,null,[{key:"getImagePath",value:function(e){var t=e.path,n=e.width,r=Object.keys(this.width).includes(n)?this.width[n]:this.width.default;return"".concat(this.BASE_URL).concat(r).concat(t)}}]),t}();function de(e){var t=e.genres,n=e.poster_path,r=e.release_date,a=e.title,o=e.vote_average,i=e.id;if(0!==t.length)return(t=t.map((function(e){return'<span class="movie-card_genres">'.concat(e,"</span>")}))).length>2&&(t=t.slice(0,2)).push('<span class="movie-card_genres">Other</span>'),'<article class="movie-card" data-movie-id="'.concat(i,'">\n    <picture>\n        <source srcset="').concat(ue.getImagePath({path:n}),", 1x, ").concat(ue.getImagePath({path:n,width:"retina"}),', 2x" type="image/jpeg">\n        <img class="movie-card_img" src= "').concat(ue.getImagePath({path:n}),' " alt=').concat(a,'>\n    </picture>\n    <h2 class="movie-card_title">').concat(a,'</h2>\n    <div class="movie-card_info">\n        ').concat(t.join(", "),'\n        <p class="movie-card_symbol">|</p>\n        <p class="movie-card_date">').concat(r,'</p>\n        <div class="movie-card_avarage">\n            <p class="movie-card_avarage__accent">').concat(o,"</p>\n        </div>\n    </div>\n</article>")}e(te)(ue,"BASE_URL","https://image.tmdb.org/t/p/"),e(te)(ue,"width",{default:"w342",retina:"w780",original:"original"});var he={backdrop:document.querySelector("#backdrop-modal-card"),testOpenModalCard:document.querySelector("#try-to-open-modal-card"),modalContainer:document.querySelector("#modal")};var fe=new WeakMap,ve=new WeakMap,pe=new WeakMap,ge=new WeakMap,me=new WeakMap,ye=new WeakMap,be=new WeakSet,_e=new WeakSet,we=new WeakSet,ke=new WeakSet,Le=function(){"use strict";function t(n){var r=n.apiService,a=n.collectionsService,i=n.markupRender,c=n.modalRender;e(d)(this,t),e(E)(this,be),e(E)(this,_e),e(E)(this,we),e(E)(this,ke),e(g)(this,fe,{writable:!0,value:void 0}),e(g)(this,ve,{writable:!0,value:void 0}),e(g)(this,pe,{writable:!0,value:void 0}),e(g)(this,ge,{writable:!0,value:void 0}),e(g)(this,me,{writable:!0,value:void 0}),e(g)(this,ye,{writable:!0,value:void 0}),this.siteCurrentPage=o.home,e(b)(this,fe,r),e(b)(this,ve,a),e(b)(this,pe,i),e(b)(this,ge,c),this.hiderClass="js-hidden",this.myLibraryClass="my-library",this.init(),this.homeHandler()}return e(P)(t,[{key:"init",value:function(){i.headerLogo.addEventListener("click",this.homeHandler.bind(this)),i.headerHomeBtn.addEventListener("click",this.homeHandler.bind(this)),i.headerMyLibBtn.addEventListener("click",this.watchedHandler.bind(this,{isFromHome:!0}))}},{key:"homeHandler",value:function(){var t=e(h)(this,fe).getTrendingMovies.bind(e(h)(this,fe),{page:1});e(L)(this,be,Ee).call(this),e(L)(this,ke,Oe).call(this),e(h)(this,pe).call(this,{loader:t,target:i.libraryContainer})}},{key:"searchHandler",value:function(t){var n=t.searchQuery,r=t.page,a=void 0===r?1:r;e(h)(this,fe).searchMovies.bind(e(h)(this,fe),{searchQuery:n,page:a});console.log("QUEUE PAGE LOADED")}},{key:"watchedHandler",value:function(t){t.page;t.isFromHome&&(e(L)(this,be,Ee).call(this),e(L)(this,we,Pe).call(this)),console.log("WATCHED PAGE LOADED"),e(L)(this,_e,xe).call(this)}},{key:"queueHandler",value:function(t){t.page;console.log("QUEUE PAGE LOADED"),e(L)(this,_e,xe).call(this)}},{key:"modalHandler",value:function(e){e.content;console.log("MODAL LOADED")}}]),t}();function Ee(){var e=i.headerHomeBtn.disabled;i.headerHomeBtn.disabled=!e,i.headerMyLibBtn.disabled=e,i.headerLogo.classList.toggle("disabled"),i.headerContainer.classList.toggle(this.myLibraryClass),i.searchFormContainer.classList.toggle(this.hiderClass),i.collectionsBtnsContainer.classList.toggle(this.hiderClass)}function xe(){var e=i.collectionWatchedBtn.disabled;i.collectionWatchedBtn.disabled=!e,i.collectionQueueBtn.disabled=e}function Pe(){e(b)(this,me,this.queueHandler.bind(this)),e(b)(this,ye,this.watchedHandler.bind(this,{isFromHome:!1})),i.collectionQueueBtn.addEventListener("click",e(h)(this,me)),i.collectionWatchedBtn.addEventListener("click",e(h)(this,ye))}function Oe(){i.collectionQueueBtn.removeEventListener("click",e(h)(this,me)),i.collectionWatchedBtn.removeEventListener("click",e(h)(this,ye))}var Me=new WeakMap,Se=function(){"use strict";function t(n){var r=n.language,a=void 0===r?"default":r;e(d)(this,t),e(g)(this,Me,{writable:!0,value:void 0}),e(b)(this,Me,a),this.switchCaptions({language:e(h)(this,Me)})}return e(P)(t,[{key:"switchCaptions",value:function(t){var n=t.language,r=void 0===n?"default":n;e(b)(this,Me,r),i.headerLogoName.textContent=c[e(h)(this,Me)].logoName,i.headerHomeBtn.textContent=c[e(h)(this,Me)].buttons.home,i.headerMyLibBtn.textContent=c[e(h)(this,Me)].buttons.library,i.collectionWatchedBtn.textContent=c[e(h)(this,Me)].buttons.watched,i.collectionQueueBtn.textContent=c[e(h)(this,Me)].buttons.queue,i.searchForm.placeholder=c[e(h)(this,Me)].searchPlaceholder}}]),t}(),je=i.body,Ce=i.backdrop,Ae=i.modalCloseBtn;function We(){Ce.classList.add("js-hidden"),modalContainer.innerHTML="",je.classList.remove("js-modal-is-open"),Ae.removeEventListener("click",We)}Ae.addEventListener("click",We),Ce.addEventListener("click",(function e(t){t.target===t.currentTarget&&(We(),Ce.removeEventListener("click",e))})),window.addEventListener("keydown",(function e(t){"Escape"===t.key&&(We(),window.removeEventListener("keydown",e))}));var Te=new $("userPreferences").getPreferences().language;new Se({language:Te="ukrainian"}),new Le({apiService:new B({language:Te}),collectionsService:new ce("userCollections"),markupRender:function(e){var t=e.loader,n=e.target;t(e.content).then((function(e){var t=e.results.map((function(e){return de(e)})).join("");n.innerHTML=t})).catch(console.log)}});he.testOpenModalCard.addEventListener("click",(function(){he.backdrop.classList.remove("js-hidden");var e,t,n,r,a,o,i,c,s,l=(t=(e={about:"Four of the West’s most infamous outlaws assemble to steal a huge stash of gold from the most corrupt settlement of the gold rush towns. But not all goes to plan one is killed and the other three escapes with bags of gold hide out in the abandoned gold mine where they happen across another gang of three – who themselves were planning to hit the very same bank! As tensions rise, things go from bad to worse as they realise the bags of gold are filled with lead... they’ve been double crossed – but by who and how?",imgSrc:"https://image.tmdb.org/t/p/original//ci5A9TPmNajMxt1L8p4KlZ76sc9.jpg",imgAlt:"test",originalTitle:"A FISTFUL OF LEAD",vote:"7.3",votes:"1260",popularity:"100.2",genre:"Western"}).about,n=e.imgSrc,r=e.imgAlt,a=e.originalTitle,o=e.vote,i=e.votes,c=e.popularity,s=e.genre,'\n\n        <div class="modal-card-thumb__img" >\n            <img src="'.concat(n,'" alt="').concat(r,'" loading="lazy" class="modal-card__img" type="image/jpeg" id="img-in-modal-card-picture"/>\n        </div>   \n            \n        <div class="modal-card-thumb__content">\n            <div class="modal-card-info">\n                <h2 class="modal-card-info__title">').concat(a,'</h2>\n                <div class="modal-card__thumb--characteristics">\n                    <ul class="modal-card-info__characteristics">\n                        <li class="modal-card-info__characteristics--item">\n                            <p class="modal-card-info__characteristics--name">Vote/Votes</p>\n                        </li>\n                        <li class="modal-card-info__characteristics--item">\n                            <p class="modal-card-info__characteristics--name">Popularity</p>\n                        </li>\n                        <li class="modal-card-info__characteristics--item">\n                            <p class="modal-card-info__characteristics--name">Original Title</p>\n                        </li>\n                        <li class="modal-card-info__characteristics--item">\n                            <p class="modal-card-info__characteristics--name">Genre</p>\n                        </li>\n                    </ul>\n                    <ul class="modal-card-info__data">\n                        <li class="modal-card-info__data--item">                            \n                            <p class="modal-card-info__data--slesh">\n                                <span class="modal-card-info__data--vote">').concat(o,'</span>\n                                /\n                                <span class="modal-card-info__data--votes">').concat(i,'</span>\n                            </p>\n                        </li>\n                        <li class="modal-card-info__data--item">\n                            <p class="modal-card-info__data--popularity">').concat(c,'</p>\n                        </li>\n                        <li class="modal-card-info__data--item">\n                            <p class="modal-card-info__data--original-title">').concat(a,'</p>\n                        </li>\n                        <li class="modal-card-info__data--item">\n                            <p class="modal-card-info__data--genre">').concat(s,'</p>\n                        </li>\n                    </ul>\n                </div>\n                <h3 class="modal-card-info-about__title">About</h3>\n                <p class="modal-card-info-about__description">').concat(t,'</p>\n            </div>\n            <div class="modal-card-thumb__btn">\n                <button type="button" id="watched-add" title="add to Watched" class="modal-card-btn__watched">add to Watched</button>\n                <button type="button" id="queue-add" title="add to Queue" class="modal-card-btn__queue">add to queue</button>\n            </div>\n        </div>\n    \n    '));he.modalContainer.innerHTML=l}))}();
//# sourceMappingURL=index.f6f6e48b.js.map
